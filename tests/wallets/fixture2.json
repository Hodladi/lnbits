{
    "funding_sources": {
        "breez": {
            "wallet_class": "BreezSdkWallet",
            "settings": {
                "breez_api_key": "100",
                "breez_greenlight_seed": "push divert icon era bracket fade much kind reason injury suffer muffin",
                "breez_greenlight_device_key": "tests/wallets/data/certificates/cert.pem",
                "breez_greenlight_device_cert": "tests/wallets/data/certificates/breez.crt"
            }
        },
        "corelightning": {
            "wallet_class": "CoreLightningWallet",
            "settings": {
                "corelightning_rpc": "some-mock-value"
            }
        }
    },
    "functions": {
        "status": {
            "mocks": {
                "breez": {
                    "breez_connect": {
                        "method": "breez_sdk.connect",
                        "request_type": "function"
                    }
                },
                "corelightning": {
                    "rpc_new": {
                        "method": "pyln.client.LightningRpc.__new__",
                        "request_type": "function",
                        "response_type": "data",
                        "response": {
                            "help": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "help": [
                                        {
                                            "command": "some command"
                                        }
                                    ]
                                }
                            },
                            "listinvoices": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "invoices": []
                                }
                            }
                        }
                    }
                }
            },
            "tests": [
                {
                    "description": "success",
                    "call_params": {},
                    "expect": {
                        "error_message": null,
                        "balance_msat": 55000
                    },
                    "mocks": {
                        "breez": {
                            "breez_connect": [
                                {
                                    "response_type": "data",
                                    "response": {
                                        "node_info": {
                                            "request_type": "function",
                                            "response_type": "data",
                                            "response": {
                                                "channels_balance_msat": 55000
                                            }
                                        }
                                    }
                                }
                            ]
                        },
                        "corelightning": {
                            "rpc_new": [
                                {
                                    "description": "one channel",
                                    "response": {
                                        "listfunds": {
                                            "request_type": "function",
                                            "response_type": "json",
                                            "response": {
                                                "channels": [
                                                    {
                                                        "our_amount_msat": 55000
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                },
                                {
                                    "description": "two channels",
                                    "response": {
                                        "listfunds": {
                                            "request_type": "function",
                                            "response_type": "json",
                                            "response": {
                                                "channels": [
                                                    {
                                                        "our_amount_msat": 25000
                                                    },
                                                    {
                                                        "our_amount_msat": 30000
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "description": "error",
                    "call_params": {},
                    "expect": {
                        "error_message": "Unable to connect, got: 'test-error'",
                        "balance_msat": 0
                    },
                    "mocks": {
                        "breez": {
                            "breez_connect": [
                                {
                                    "response_type": "data",
                                    "response": {
                                        "node_info": {
                                            "request_type": "function",
                                            "response_type": "exception",
                                            "response": {
                                                "data": "test-error"
                                            }
                                        }
                                    }
                                }
                            ]
                        },
                        "corelightning": {
                            "rpc_new": [
                                {
                                    "response": {
                                        "listfunds": {
                                            "request_type": "function",
                                            "response_type": "exception",
                                            "response": {
                                                "data": "test-error"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "description": "missing data",
                    "call_params": {},
                    "expect": {
                        "error_message": "no data",
                        "balance_msat": 0
                    },
                    "mocks": {
                        "breez": {
                            "breez_connect": []
                        },
                        "corelightning": {
                            "rpc_new": [
                                {
                                    "response": {
                                        "listfunds": {
                                            "request_type": "function",
                                            "response_type": "json",
                                            "response": {}
                                        }
                                    }
                                }
                            ]
                        }
                    }
                },
                {
                    "description": "RPC call failed:",
                    "call_params": {},
                    "expect": {
                        "error_message": "RPC 'test_method' failed with 'test-error'.",
                        "balance_msat": 0
                    },
                    "mocks": {
                        "breez": {
                            "breez_connect": []
                        },
                        "corelightning": {
                            "rpc_new": [
                                {
                                    "response": {
                                        "listfunds": {
                                            "request_type": "function",
                                            "response_type": "exception",
                                            "response": {
                                                "module": "pyln.client.lightning",
                                                "class": "RpcError",
                                                "data": {
                                                    "method": "test_method",
                                                    "payload": "y",
                                                    "error": "test-error"
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            ]
        },
        "create_invoice": {
            "mocks": {
                "breez": {
                    "breez_connect": {
                        "method": "breez_sdk.connect",
                        "request_type": "function"
                    }
                },
                "corelightning": {
                    "rpc_new": {
                        "method": "pyln.client.LightningRpc.__new__",
                        "request_type": "function",
                        "response_type": "data",
                        "response": {
                            "help": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "help": [
                                        {
                                            "command": "some command"
                                        }
                                    ]
                                }
                            },
                            "listinvoices": {
                                "request_type": "function",
                                "response_type": "json",
                                "response": {
                                    "invoices": []
                                }
                            }
                        }
                    }
                }
            },
            "tests": [
                {
                    "description": "success",
                    "call_params": {
                        "amount": 555,
                        "memo": "Test Invoice",
                        "label": "test-label"
                    },
                    "expect": {
                        "success": true,
                        "checking_id": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                        "payment_request": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n",
                        "error_message": null
                    },
                    "mocks": {
                        "breez": {
                            "breez_connect": [
                                {
                                    "response_type": "data",
                                    "response": {
                                        "receive_payment": {
                                            "request_type": "function",
                                            "response_type": "data",
                                            "response": {
                                                "ln_invoice": {
                                                    "payment_hash": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                                                    "bolt11": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n"
                                                }
                                            }
                                        }
                                    }
                                }
                            ]
                        },
                        "corelightning": {
                            "rpc_new": [
                                {
                                    "description": "one channel",
                                    "response": {
                                        "invoice": {
                                            "request_type": "function",
                                            "response_type": "json",
                                            "response": {
                                                "payment_hash": "e35526a43d04e985594c0dfab848814f524b1c786598ec9a63beddb2d726ac96",
                                                "bolt11": "lnbc5550n1pnq9jg3sp52rvwstvjcypjsaenzdh0h30jazvzsf8aaye0julprtth9kysxtuspp5e5s3z7felv4t9zrcc6wpn7ehvjl5yzewanzl5crljdl3jgeffyhqdq2f38xy6t5wvxqzjccqpjrzjq0yzeq76ney45hmjlnlpvu0nakzy2g35hqh0dujq8ujdpr2e42pf2rrs6vqpgcsqqqqqqqqqqqqqqeqqyg9qxpqysgqwftcx89k5pp28435pgxfl2vx3ksemzxccppw2j9yjn0ngr6ed7wj8ztc0d5kmt2mvzdlcgrludhz7jncd5l5l9w820hc4clpwhtqj3gq62g66n"
                                            }
                                        }
                                    }
                                }
                            ]
                        }
                    }
                }
            ]
        }
    }
}
